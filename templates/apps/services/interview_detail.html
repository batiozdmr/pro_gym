{% extends 'base.html' %}
{% load crispy_forms_filters %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header card-default">
                    <h3>İletişim Bilgileri</h3>
                    <p>Dönem Kodu: {{ community.period_code }}</p>
                </div>
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Ad Soyad</th>
                            <th>1. Telefon</th>
                            <th>2. Telefon</th>
                            <th>3. Telefon</th>
                        </tr>

                        </thead>
                        <tbody>
                        <tr>
                            <td>{{ community.full_name }}</td>
                            <td>{% if community.phone_one != 'None' %}{{ community.phone_one }}{% endif %}</td>
                            <td>{% if community.phone_two != 'None' %}{{ community.phone_two }}{% endif %}</td>
                            <td>{% if community.phone_three != 'None' %}{{ community.phone_three }}{% endif %}</td>
                        </tr>
                        </tbody>
                    </table>

                    <div data-scroll="true" data-height="460">
                        <form class="form-horizontal" method="POST"
                              action="{% url 'services:add-interview' community.id %}">
                            {% csrf_token %}
                            <div class="row">
                                <div id="div_id_interview_status" class="form-group col-12">
                                    <label
                                            for="id_interview_status"
                                            class=" requiredField">
                                        Durum<span class="asteriskField">*</span> </label>
                                    <div><select name="interview_status"
                                                 class="select form-control"
                                                 id="id_interview_status">
                                        <option value="">Seçiniz</option>
                                        {% for interviews_statu in interviews_statu_list %}
                                            <option value="{{ interviews_statu.id }}">{{ interviews_statu.text }}</option>
                                        {% endfor %}

                                    </select></div>
                                </div>
                                <div id="div_id_price_sales" class="form-group col-6">
                                    <label for="id_price_sales"
                                           class=" requiredField">
                                        Satış Fiyatı<span class="asteriskField">*</span>
                                    </label>
                                    <div><input type="number" name="price_sales" value="0.0"
                                                step="0.00"
                                                class="numberinput form-control" required=""
                                                id="id_price_sales">
                                        <small id="hint_id_price_sales"
                                               class="form-text text-muted">Minimum
                                            0.00</small></div>
                                </div>
                                <div id="div_id_price_rent" class="form-group col-6">
                                    <label for="id_price_rent" class=" requiredField">
                                        Kira Ücreti<span class="asteriskField">*</span>
                                    </label>
                                    <div>
                                        <input type="number" name="price_rent" value="0.0"
                                               step="0.00"
                                               class="numberinput form-control" required=""
                                               id="id_price_rent">
                                        <small id="hint_id_price_rent"
                                               class="form-text text-muted">Minimum
                                            0.00</small>
                                    </div>
                                </div>
                                <div id="div_id_note" class="form-group col-12">
                                    <label for="id_price_sales" class=" requiredField">
                                        Not
                                        <span class="asteriskField">*</span>
                                    </label>
                                    <div>
                                        <textarea name="note" class="numberinput form-control" required=""
                                                  id="id_note"></textarea>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-success mb-4"
                                    style="float: right"
                                    name="add_interview">Kaydet
                            </button>
                        </form>
                    </div>

                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Durum</th>
                            <th>Satış Fiyatı</th>
                            <th>Kira Fiyatı</th>
                            <th>Not</th>
                            <th>Durum Tarihi</th>
                            <th>Kullanıcı</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for interview in community.interview_list %}
                            <tr>
                                <td>{{ interview.interview_status }}</td>
                                <td>{{ interview.price_sales }}</td>
                                <td>{{ interview.price_rent }}</td>
                                <td>{{ interview.note }}</td>
                                <td>{% if interview.update_at %}{{ interview.update_at }}{% else %}
                                    {{ interview.created_at }}{% endif %}</td>
                                <td>{{ interview.user }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}